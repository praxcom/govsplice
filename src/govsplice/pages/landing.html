<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Govsplice - Open-Core Geospatial Software</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/style">
</head>
<body class="bg-soft-cream text-deep-teal font-sans antialiased">

    <header class="sticky top-0 z-50 bg-soft-cream/95 backdrop-blur-sm shadow-md border-b border-light-surface">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-extrabold text-deep-teal tracking-tighter">
                Gov<span class="text-accent-teal">splice</span>
            </a>
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="#product" class="text-sm font-medium text-deep-teal hover:text-accent-teal transition duration-200">Product</a>
                <a href="#pricing" class="text-sm font-medium text-deep-teal hover:text-accent-teal transition duration-200">Pricing</a>
                <a href="#resources" class="text-sm font-medium text-deep-teal hover:text-accent-teal transition duration-200">Resources</a>
                <a href="#get-started" class="text-sm font-semibold text-deep-teal hover:text-accent-teal transition duration-200">Login</a>
                <a href="#get-started" class="px-5 py-2 bg-deep-teal text-soft-cream rounded-lg text-sm font-bold hover:bg-teal-700 transition">Sign Up</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-lg hover:bg-light-surface transition duration-200 text-deep-teal" aria-label="Toggle Menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </header>

    <main>
        <section class="hero-bg py-20 lg:py-32 overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <div class="max-w-3xl mx-auto">
                    <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold leading-tight tracking-tighter mb-6 text-deep-teal">
                        Deeper Geospatial Insights. <span class="text-accent-teal">Half the Cost.</span>
                    </h1>
                    <p class="text-xl text-deep-teal/80 mb-10 max-w-2xl mx-auto">
                        Stop overpaying for slow, complex mapping software. Get deep, fast insights with our open-core platform.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="#get-started" class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-xl shadow-lg text-soft-cream bg-accent-pink hover:bg-fuchsia-400 transition duration-300 transform hover:scale-[1.02] shadow-accent-pink/50">
                            Get Started
                        </a>
                        <a href="#product" class="inline-flex items-center justify-center px-8 py-3 border-2 border-deep-teal/40 text-base font-medium rounded-xl text-deep-teal hover:bg-light-surface transition duration-300 transform hover:scale-[1.02]">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="product" class="py-20 lg:py-28 bg-soft-cream">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-extrabold text-deep-teal mb-4">Features Engineered for Collaboration</h2>
                    <p class="text-xl text-deep-teal/80 max-w-3xl mx-auto">Govsplice handles terabytes of imagery and sensor streams with reliability, designed for civic and research cooperation.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                    <div class="bg-light-surface p-8 rounded-2xl border border-deep-teal/10 shadow-lg transition duration-300 hover:scale-[1.01]">
                        <div class="text-accent-teal mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-deep-teal mb-3">Vector & Raster Speed</h3>
                        <p class="text-deep-teal/70">Leverage native C++ bindings and parallel processing for operations that feel instantaneous, regardless of dataset size.</p>
                    </div>
                    <div class="bg-light-surface p-8 rounded-2xl border border-deep-teal/10 shadow-lg transition duration-300 hover:scale-[1.01]">
                        <div class="text-accent-teal mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 110 4h2a2 2 0 110 4h-2a2 2 0 110 4h2a2 2 0 110 4M10 10l3-3m-3 7l3 3"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-deep-teal mb-3">API First Design</h3>
                        <p class="text-deep-teal/70">Easily integrate with Python, R, and JavaScript. Build custom plugins and algorithms with our core APIs.</p>
                    </div>
                    <div class="bg-light-surface p-8 rounded-2xl border border-deep-teal/10 shadow-lg transition duration-300 hover:scale-[1.01]">
                        <div class="text-accent-teal mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.976v-1c0-2.21-1.79-4-4-4S7 2.83 7 5.05v1.27m8 8.24l-3-3m0 0l-3 3m3-3v12"></path></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-deep-teal mb-3">Cloud Optimized</h3>
                        <p class="text-deep-teal/70">Native support for COGs, Zarr, and S3 storage. Scale analysis across serverless functions effortlessly.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pricing" class="py-20 lg:py-28 bg-light-surface">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-extrabold text-deep-teal mb-4">Pricing Built for Open-Core Success</h2>
                    <p class="text-xl text-deep-teal/80 max-w-3xl mx-auto">Choose the model that best fits your scale and hosting needs.</p>
                </div>
                <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:gap-12 max-w-4xl mx-auto">
                    <div class="bg-soft-cream p-8 rounded-2xl border-4 border-accent-teal/50 shadow-2xl">
                        <h3 class="text-3xl font-extrabold text-deep-teal mb-3">Community Edition</h3>
                        <div class="text-5xl font-extrabold text-deep-teal mb-6">£0<span class="text-xl font-normal text-deep-teal/70">/mo</span></div>
                        <ul class="space-y-3 text-deep-teal/80 mb-8">
                            <li class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-accent-teal" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                <span>Self-hosted deployment</span>
                            </li>
                        </ul>
                        <a href="#get-started" class="block w-full text-center py-3 font-semibold rounded-xl text-deep-teal border-2 border-accent-teal/70">Get Started</a>
                    </div>
                    <div class="bg-soft-cream p-8 rounded-2xl border-4 border-accent-pink shadow-2xl transform scale-[1.03]">
                        <h3 class="text-3xl font-extrabold text-deep-teal mb-3">Hosted Professional</h3>
                        <div class="text-5xl font-extrabold text-deep-teal mb-6">£49<span class="text-xl font-normal text-deep-teal/70">/mo</span></div>
                        <ul class="space-y-3 text-deep-teal/80 mb-8">
                            <li class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-accent-pink" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                <span>Fully managed service</span>
                            </li>
                        </ul>
                        <a href="#get-started" class="block w-full text-center py-3 font-bold rounded-xl text-soft-cream bg-accent-pink">Start Trial</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="get-started" class="auth-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-extrabold mb-4">Access Govsplice</h2>
                    <p class="text-lg text-deep-teal/60">Log in to your dashboard or create a new community account.</p>
                </div>
                <div class="auth-container">
                    <div class="auth-card-static">
                        <h3 class="text-2xl font-bold mb-2">Login</h3>
                        <p class="text-sm text-deep-teal/60 mb-6">Welcome back to Govsplice.</p>
                        <form onsubmit="handleAuth(event, 'login')">
                            <input type="text" name="username" placeholder="Email Address" class="auth-input" required>
                            <input type="password" name="password" placeholder="Password" class="auth-input" required>
                            <div id="login-error" class="error-msg"></div>
                            <button type="submit" class="auth-btn bg-accent-teal">Login to Dashboard</button>
                        </form>
                    </div>
                    <div class="auth-card-static">
                        <h3 class="text-2xl font-bold mb-2 text-accent-pink">Sign Up</h3>
                        <p class="text-sm text-deep-teal/60 mb-6">Create your community account.</p>
                        <form onsubmit="handleAuth(event, 'signup')">
                            <input type="text" name="name" placeholder="Full Name" class="auth-input" required>
                            <input type="email" name="username" placeholder="Email Address" class="auth-input" required>
                            <input type="password" name="password" placeholder="Create Password" class="auth-input" required>
                            <div id="signup-error" class="error-msg"></div>
                            <button type="submit" class="auth-btn bg-accent-pink">Create Free Account</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section id="resources" class="py-20 bg-soft-cream">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <h2 class="text-4xl font-extrabold mb-8">Resources</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 max-w-4xl mx-auto">
                    <div class="bg-light-surface p-10 rounded-2xl shadow-xl">
                        <h3 class="text-2xl font-bold mb-4">Documentation</h3>
                        <p class="mb-6">API references and setup guides.</p>
                        <a href="#" class="text-accent-teal font-semibold">Read the Docs →</a>
                    </div>
                    <div class="bg-light-surface p-10 rounded-2xl shadow-xl">
                        <h3 class="text-2xl font-bold mb-4">Tutorials</h3>
                        <p class="mb-6">Step-by-step geospatial analysis.</p>
                        <a href="#" class="text-accent-teal font-semibold">Watch Now →</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 bg-light-surface">
            <div class="max-w-3xl mx-auto px-4 text-center">
                <h2 class="text-4xl font-extrabold mb-4">Contact Sales</h2>
                <form class="mt-12 bg-soft-cream p-8 rounded-xl border border-deep-teal/10 shadow-lg space-y-4">
                    <input type="text" placeholder="Your Name" class="w-full p-3 rounded-lg border-2 border-deep-teal/20 bg-soft-cream">
                    <textarea placeholder="Message" class="w-full p-3 rounded-lg border-2 border-deep-teal/20 bg-soft-cream"></textarea>
                    <button type="submit" class="w-full py-3 font-bold rounded-xl text-soft-cream bg-accent-teal">Submit Inquiry</button>
                </form>
            </div>
        </section>
    </main>

    <footer class="bg-light-surface border-t border-deep-teal/10 py-10 text-center">
        <p class="text-sm text-deep-teal/60">© 2025 Govsplice. Open-Core Public Data.</p>
    </footer>

    <script>
        async function handleAuth(event, type) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const errorEl = document.getElementById(`${type}-error`);
            errorEl.style.display = 'none';

            const url = type === 'login' ? '/api/v1/login' : '/api/v1/signup';
            let options = { method: 'POST' };

            if (type === 'login') {
                options.body = formData;
            } else {
                const data = Object.fromEntries(formData.entries());
                options.headers = { 'Content-Type': 'application/json' };
                options.body = JSON.stringify(data);
            }

            try {
                const response = await fetch(url, options);
                if (response.ok) {
                    if (type === 'signup') {
                        // After successful signup, immediately trigger login to get the token
                        const loginData = new FormData();
                        loginData.append('username', formData.get('username'));
                        loginData.append('password', formData.get('password'));
                        
                        const loginResponse = await fetch('/api/v1/login', {
                            method: 'POST',
                            body: loginData
                        });
                        
                        if (!loginResponse.ok) throw new Error("Auto-login failed");
                    }
                    window.location.href = '/viewer';
                } else {
                    const err = await response.json();
                    errorEl.innerText = err.detail || "Authentication failed.";
                    errorEl.style.display = 'block';
                }
            } catch (e) {
                errorEl.innerText = "Connection error. Is the server running?";
                errorEl.style.display = 'block';
            }
        }
    </script>
</body>
</html>